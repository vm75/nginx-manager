services:
  nginx-proxy:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: nginx-proxy
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
      - "8080:8080"
    volumes:
      # Nginx configuration (persistent)
      - /DATA/docker/nginx-proxy/config:/etc/nginx
      # Nginx logs
      - /DATA/docker/nginx-proxy/logs:/var/log/nginx
      # Fail2ban logs
      - /DATA/docker/nginx-proxy/fail2ban:/var/log/fail2ban
      # SSL certificates (if using Let's Encrypt)
      - /DATA/docker/nginx-proxy/certs:/etc/nginx/ssl
    environment:
      - TZ=UTC
      - NGINX_EDITOR_PORT=8080
      - CERT_RENEWAL_DAYS=5
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      - nginx-net

networks:
  nginx-net:
    driver: bridge
