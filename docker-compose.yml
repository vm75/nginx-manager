services:
  nginx-manager:
    build:
      context: .
      dockerfile: Dockerfile
    image: vm75/nginx-manager:latest
    container_name: nginx-manager
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
      - "8080:8080"
    volumes:
      # Nginx configuration (persistent)
      - /DATA/docker/nginx-manager/config:/etc/nginx
      # Nginx logs
      - /DATA/docker/nginx-manager/logs:/var/log/nginx
      # Fail2ban logs
      - /DATA/docker/nginx-manager/fail2ban:/var/log/fail2ban
      # SSL certificates (if using Let's Encrypt)
      - /DATA/docker/nginx-manager/certs:/etc/nginx/ssl
    environment:
      - TZ=UTC
      - NGINX_MANAGER_PORT=8080
      - CERT_RENEWAL_DAYS=5
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      - nginx-net

networks:
  nginx-net:
    driver: bridge
